@import "tailwindcss";

/* Animaciones para el corazón */
@keyframes heart-pop {
  0% { transform: scale(1); }
  40% { transform: scale(1.35); }
  60% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

@keyframes heart-burst-scale {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(1.35); opacity: 0; }
}

/* Pulsing border para el botón Filtrar: anillo sutil que se expande y desvanece */
@keyframes pulse-border {
  0% {
    box-shadow: 0 0 0 0 rgba(99,102,241,0.55);
    opacity: 1;
    transform: scale(1);
  }
  50% {
    box-shadow: 0 8px 24px 6px rgba(99,102,241,0.08);
    opacity: 0.9;
    transform: scale(1.01);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(99,102,241,0);
    opacity: 0;
    transform: scale(1);
  }
}

.burst-particle {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 12px;
  height: 12px;
  transform: translate(-50%, -50%) scale(1);
  border-radius: 50%;
  background: rgba(239,68,68,1); /* rojo sólido */
  opacity: 1;
  pointer-events: none;
  will-change: transform, opacity;
  z-index: 70;
  box-shadow: 0 4px 10px rgba(239,68,68,0.18);
  transition: transform 420ms cubic-bezier(.16,.84,.44,1), opacity 420ms linear;
}

/* Desactivar las pseudo-nubes brumosas si existen para evitar efecto niebla */
.heart-burst .burst-ring::before,
.heart-burst .burst-ring::after {
  display: none !important;
  content: none !important;
}

/* Asegurar que el burst-ring no añada efectos extra */
.heart-burst .burst-ring {
  background: transparent !important;
}

/* Mantener overflow visible en el botón para que partículas no se recorten */
.button-heart-hover { overflow: visible; }

.heart-icon {
  display: inline-block;
  transform-origin: center center;
}

.heart-pop .heart-icon {
  animation: heart-pop 420ms cubic-bezier(.17,.67,.11,1.02) both;
}

.heart-burst .heart-icon {
  animation: heart-burst-scale 420ms cubic-bezier(.17,.67,.11,1.02) both;
}

.burst-ring {
  position: absolute;
  inset: 0;
  display: block;
  pointer-events: none;
  overflow: visible;
  z-index: 60; /* por encima del botón */
}

/* Ajustes para que el anillo no oculte el icono */
.heart-burst .heart-icon {
  position: relative;
  z-index: 10;
}

/* un pequeño pulso al pasar el mouse para dar affordance */
.button-heart-hover:hover .heart-icon { transform: scale(1.08); }

/* compatibilidad: asegurar que el botón sigue clicable aun si la tarjeta tiene pointer-events-none aplicado */
.button-heart-hover {
  pointer-events: auto;
  overflow: visible;
}

.filter-button-pulse {
  position: relative; /* para el ::after */
  overflow: visible; /* permitir que el anillo sea visible */
  z-index: 0; /* asegurar stacking coherente */
}

.filter-button-pulse::after {
  content: "";
  position: absolute;
  inset: -9px; /* rodea el botón exactamente y evita cálculos con translate */
  border-radius: inherit;
  pointer-events: none;
  background: transparent;
  box-shadow: 0 0 0 0 rgba(99,102,241,0.45);
  transition: box-shadow 420ms cubic-bezier(.2,.8,.2,1), transform 420ms cubic-bezier(.2,.8,.2,1), opacity 420ms ease;
  will-change: box-shadow, transform, opacity;
  z-index: -1; /* detrás del botón */
  animation: pulse-border 2000ms cubic-bezier(.2,.8,.2,1) infinite;
}

/* Pulso más marcado al recibir foco (accesibilidad) */
.filter-button-pulse:focus-visible::after {
  animation-duration: 1400ms;
  box-shadow: 0 0 0 6px rgba(99,102,241,0.12);
}
